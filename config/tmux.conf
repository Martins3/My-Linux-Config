# ä½¿ç”¨ Ctrl h ä½œä¸º prefix
set -g prefix C-h

set-option -sa terminal-overrides ",xterm*:Tc"

# è®© window çš„ç¼–å·å’Œ pane çš„ç¼–å·ä» 0 å¼€å§‹ï¼Œå› ä¸º 0 è¿™ä¸ªé”®å®åœ¨æ˜¯å¤ªè¿œäº†
set -g base-index 1
setw -g pane-base-index 1

# ä½¿ç”¨ Alt + num æ¥é€‰æ‹©ä¸åŒçš„ window
bind-key -n M-1 select-window -t 1
bind-key -n M-2 select-window -t 2
bind-key -n M-3 select-window -t 3
bind-key -n M-4 select-window -t 4
bind-key -n M-5 select-window -t 5
bind-key -n M-6 select-window -t 6
bind-key -n M-7 select-window -t 7
bind-key -n M-8 select-window -t 8
bind-key -n M-9 select-window -t 9
bind-key -n M-0 select-window -t 10

# ä½¿ç”¨ Alt+hljk æ¥åœ¨ä¸åŒçš„ pane ä¸­ç§»åŠ¨
bind -n M-h select-pane -L
bind -n M-j select-pane -D
bind -n M-k select-pane -U
bind -n M-l select-pane -R

# å¢åŠ çŠ¶æ€æ çš„å¯¹æ¯”åº¦
setw -g window-status-current-style fg=black,bg=yellow
# å°†é»˜è®¤åœ¨åº•éƒ¨çš„çŠ¶æ€æ ç§»åŠ¨åˆ°ä¸Šé¢å»
set-option -g status-position top

# å¯ä»¥ç”¨é¼ æ ‡ç›´æ¥è°ƒæ•´ pane çš„å¤§å°
set -g mouse on

# è®© window çš„å„ç§æ“ä½œä½¿ç”¨ vim æ¨¡å¼
set-window-option -g mode-keys vi

# ç»™å½“å‰çª—å£æ·»åŠ  emoji è¡¨æƒ…
set-option -g window-status-current-format  'ğŸ§€ #{window_index}:#{b:pane_current_path}'

# åˆ›å»ºæ–°çš„ window
bind c new-window -c "#{pane_current_path}"
# æ°´å¹³åˆ›å»ºæ–°çš„ pane
bind '"' split-window -c "#{pane_current_path}"
# å‚ç›´åˆ›å»ºæ–°çš„ pane
bind % split-window -h -c "#{pane_current_path}"

# å°† window çš„åç§°è‡ªåŠ¨ä¿®æ”¹ä¸ºè·¯å¾„åç§°ï¼Œä¾¿äºåŒºåˆ†
set-option -g status-interval 0
set-option -g automatic-rename on
set-option -g automatic-rename-format '#{b:pane_current_path}'

# prefix v è¿›å…¥åˆ° copy mode
bind-key -T prefix v copy-mode

# https://superuser.com/questions/395158/tmux-copy-mode-select-text-block
setw -g mode-keys vi
bind-key -T copy-mode-vi 'v' send -X begin-selection     # Begin selection in copy mode.
# bind-key -T copy-mode-vi 'C-v' send -X rectangle-toggle  # Begin selection in copy mode.
bind-key -T copy-mode-vi 'y' send -X copy-selection      # Yank selection in copy mode.

# https://superuser.com/questions/343572/how-do-i-reorder-tmux-windows
# ä½¿ç”¨ ã€ŒCtrl Shift æ–¹å‘é”®ã€è°ƒæ•´ window çš„ä½ç½®
bind-key -n C-S-Left swap-window -t -1\; select-window -t -1
bind-key -n C-S-Right swap-window -t +1\; select-window -t +1

# ä½¿ç”¨ prefix f ç›´æ¥è¿›å…¥åˆ°æœç´¢
# https://stackoverflow.com/questions/66430860/on-tmux-2-4-how-to-enter-copy-mode-and-start-a-search-all-in-one-go
bind f copy-mode \; command-prompt -p "(search up)" "send -X search-forward \"%%%\""
bind -T copy-mode-vi f copy-mode \; command-prompt -p "(search up)" "send -X search-forward \"%%%\""

# Ctrl j / k æ¥åˆ‡æ¢ session
bind-key -n C-j switch-client -n
bind-key -n C-k switch-client -p

bind j switch-client -n
bind k switch-client -p

# æ‹·è´ä¹‹åä¸è¦é»˜è®¤è‡ªåŠ¨è¿›å…¥åˆ° normal mode
set -g @yank_action 'copy-pipe'

# åŠ è½½æ’ä»¶
# List of plugins
set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-sensible' # é»˜è®¤é…ç½®
set -g @plugin 'tmux-plugins/tmux-resurrect' # å…³æœºä¿å­˜ session
set -g @plugin 'wfxr/tmux-fzf-url' # prefix + u å½“å‰å±å¹•ä¸Šçš„ url
set -g @plugin 'tmux-plugins/tmux-yank' # æ–¹ä¾¿çš„æ‹·è´åˆ°ç³»ç»Ÿå‰ªåˆ‡æ¿

# Initialize TMUX plugin manager (keep this line at the very bottom of tmux.conf)
run '~/.tmux/plugins/tpm/tpm'
